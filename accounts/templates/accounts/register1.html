{% extends "common.html" %}

{% block content %}
{% load static %}
<!-- Login Section -->
<section class="reg d-flex align-items-center justify-content-center py-4">
  <div class="container">
    <div class="row justify-content-center">
      <div class="sh">
        <div class="">
          <h2 class="text-center mb-4 fw-bold">Welcome to Register</h2>
          <form  method="POST" class="login-form" action="{% url 'register1' %}">
            {% csrf_token %}
            {% if messages %}
            {% for m in messages  %}
              <div class="alert alert-{{m.tags}}">{{m|safe}}</div>
            {% endfor %}
            {% endif %}
            <div class="mb-2">
              <label for="firstname" class="form-label">First Name</label>
              <input type="text" id="firstname" name="firstname" class="form-control rounded-3" placeholder="John"  />
            </div>
            <div class="mb-2">
              <label for="lastname" class="form-label">Last Name</label>
              <input type="text" id="lastname" name="lastname" class="form-control rounded-3" placeholder="Doe"  />
            </div>
            <div class="mb-2">
              <label for="username" class="form-label">Username</label>
              <input type="text" id="username" name="username" class="form-control rounded-3" placeholder="john_doe"  />
            </div>
            <div class="mb-2">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" name="email" class="form-control rounded-3" placeholder="example@mail.com"  />
            </div>
            <div class="mb-2">
              <label for="password" class="form-label">Password</label>
              <input type="password" id="password" name="password" class="form-control rounded-3" placeholder="********"  />
            </div>
            <div class="mb-2">
              <label for="password" class="form-label">Confirm Password</label>
              <input type="password" id="password1" name="password1" class="form-control rounded-3" placeholder="********"  />
            </div>
            <div class="mb-2">
                <label for="userType">Choose your role:</label>
                <select name="usertype" id="usertype">
                  <option value="landlord">Landlord</option>
                  <option value="rentseeker">Rentseeker</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary w-100 rounded-3">Register</button>
          </form>
          <div class="text-center mt-3">
            <p>Already Have an account? <a href="{% url 'log_in' %}" class="text-decoration-none">Login</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- // Check if there is a success message and redirect after 4 seconds -->
<script>
   {% for message in messages %}
    {% if 'success' in message.tags %}
      setTimeout(function () {
        window.location.href = "{% url 'log_in' %}";
      }, 4000);  // 4000ms = 4 seconds
    {% endif %}
  {% endfor %}
</script>
{% endblock content %}
